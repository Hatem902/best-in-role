generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("POSTGRES_PRISMA_URL")
  directUrl = env("POSTGRES_URL_NON_POOLING")
}

model User {
  id       String  @unique
  username String? @unique
  topId    Int?
  jglId    Int?
  midId    Int?
  adcId    Int?
  suppId   Int?
  adc      Player? @relation("adc", fields: [adcId], references: [id])
  jgl      Player? @relation("jgl", fields: [jglId], references: [id])
  mid      Player? @relation("mid", fields: [midId], references: [id])
  supp     Player? @relation("supp", fields: [suppId], references: [id])
  top      Player? @relation("top", fields: [topId], references: [id])

  @@index([topId])
  @@index([jglId])
  @@index([midId])
  @@index([adcId])
  @@index([suppId])
}

model Player {
  id     Int     @id @default(autoincrement())
  name   String  @unique
  team   String?
  region String
  adc    User[]  @relation("adc")
  jgl    User[]  @relation("jgl")
  mid    User[]  @relation("mid")
  supp   User[]  @relation("supp")
  top    User[]  @relation("top")
}
